# ==============================================
# Cooly AI - Production Deployment (Dokploy/VM)
# ==============================================
# Copy this file to .env.prod and configure for your deployment
#
# IMPORTANT: Generate strong, unique passwords for production
# Use: openssl rand -base64 32
# ==============================================

# ---------------------------------------------
# DEPLOYMENT CONFIGURATION
# ---------------------------------------------
# Your domain name (Dokploy will handle SSL)
DOMAIN=test.cooly.ai
API_DOMAIN=api.test.cooly.ai
MINIO_DOMAIN=minio.test.cooly.ai
MINIO_CONSOLE_DOMAIN=minio-console.test.cooly.ai

# ---------------------------------------------
# DATABASE (Production PostgreSQL)
# ---------------------------------------------
POSTGRES_USER=cooly
POSTGRES_PASSWORD=<GENERATE-STRONG-PASSWORD-32-CHARS>
POSTGRES_DB=cooly_prod
DATABASE_URL=postgresql://cooly:<GENERATE-STRONG-PASSWORD-32-CHARS>@postgres:5432/cooly_prod

# ---------------------------------------------
# REDIS (Production)
# ---------------------------------------------
REDIS_PASSWORD=<GENERATE-STRONG-PASSWORD-32-CHARS>
REDIS_URL=redis://:<GENERATE-STRONG-PASSWORD-32-CHARS>@redis:6379

# ---------------------------------------------
# STORAGE (MinIO S3-compatible)
# ---------------------------------------------
MINIO_ROOT_USER=<GENERATE-STRONG-USERNAME>
MINIO_ROOT_PASSWORD=<GENERATE-STRONG-PASSWORD-32-CHARS>
S3_ENDPOINT=http://minio:9000
S3_PUBLIC_URL=https://minio.test.cooly.ai
S3_FORCE_PATH_STYLE=true
S3_BUCKET_NAME=cooly-prod
S3_ACCESS_KEY_ID=<SAME-AS-MINIO_ROOT_USER>
S3_SECRET_ACCESS_KEY=<SAME-AS-MINIO_ROOT_PASSWORD>
S3_REGION=us-east-1

# Also set B2 vars (code fallback)
B2_BUCKET_NAME=cooly-prod
B2_REGION=us-east-1
B2_ACCESS_KEY_ID=<SAME-AS-MINIO_ROOT_USER>
B2_SECRET_ACCESS_KEY=<SAME-AS-MINIO_ROOT_PASSWORD>

# ---------------------------------------------
# SERVER CONFIGURATION
# ---------------------------------------------
NODE_ENV=production
PORT=5000
LOG_LEVEL=info

# JWT Secret (MUST be strong random string)
JWT_SECRET=<GENERATE-STRONG-SECRET-64-CHARS>

# CORS and URLs
FRONTEND_URL=https://test.cooly.ai
ALLOWED_ORIGINS=https://test.cooly.ai,https://www.test.cooly.ai
COOKIE_DOMAIN=test.cooly.ai
APP_BASE_URL=https://api.test.cooly.ai
FRONTEND_BASE_URL=https://test.cooly.ai

# ---------------------------------------------
# WORKER CONFIGURATION
# ---------------------------------------------
START_GEN_WORKER=true
START_OUTBOX_RELAY=true
GEN_WORKER_CONCURRENCY=5
ENABLE_CAPTURE_WORKER=true
ENABLE_SESSION_SWEEPER=true
ENABLE_ENQUEUE_FIRST=true
ENABLE_OUTBOX=true
FORCE_OUTBOX_ONLY=true

# Database retry settings
PG_RETRY_ATTEMPTS=5
PG_RETRY_BASE_MS=250
PG_RETRY_JITTER_MS=250

# ---------------------------------------------
# BYTEPLUS (Seedream & Seedance)
# Copy from your production .env
# ---------------------------------------------
BYTEPLUS_APP_ID=<your-byteplus-app-id>
BYTEPLUS_ACCESS_TOKEN=<your-byteplus-access-token>
BYTEPLUS_SECRET_KEY=<your-byteplus-secret-key>
BYTEPLUS_ARK_API_KEY=<your-byteplus-ark-api-key>

# Seedream 4.0 Image Generation
SEEDREAM4_API_KEY=<your-seedream4-api-key>
SEEDREAM4_MODEL_ID=seedream-4-0-250828
SEEDREAM4_API_BASE=https://ark.ap-southeast.bytepluses.com

# Seedance Video Generation
SEEDANCE_API_BASE=https://ark.ap-southeast.bytepluses.com
SEEDANCE_CREATE_PATHS=/api/v3/contents/generations/tasks
SEEDANCE_TASK_PATHS=/api/v3/contents/generations/tasks/{taskId}
SEEDANCE_API_KEY=<your-seedance-api-key>
SEEDANCE_ENDPOINT_ID=<your-seedance-endpoint-id>

# ---------------------------------------------
# OPENAI (Sora 2)
# ---------------------------------------------
OPENAI_API_KEY=<your-openai-api-key>
OPENAI_API_BASE=https://api.openai.com/v1

# Sora Provider: 'fal', 'openai', or 'wavespeed'
SORA_PROVIDER=wavespeed

# FAL.ai
FAL_KEY=<your-fal-api-key>
FAL_SORA_MODEL=fal-ai/sora-2/text-to-video
FAL_SORA_MODEL_PRO=fal-ai/sora-2/text-to-video/pro

# WaveSpeed
WAVESPEED_API_KEY=<your-wavespeed-api-key>

# ---------------------------------------------
# GOOGLE (Veo 3.1)
# ---------------------------------------------
VIDEO_PROVIDER=google
GOOGLE_PROJECT_ID=<your-gcp-project-id>
GOOGLE_CLOUD_PROJECT=<your-gcp-project-id>
GOOGLE_LOCATION=us-central1
# Mount service account JSON in production if needed
# GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/gcp-service-account.json

# kie.ai
KIE_API_KEY=<your-kie-api-key>
KIE_API_BASE=https://api.kie.ai
KIE_ENABLE_FALLBACK=true

# ---------------------------------------------
# STRIPE (Billing)
# Use LIVE keys for production
# ---------------------------------------------
STRIPE_SECRET_KEY=<your-stripe-LIVE-secret-key>
STRIPE_PUBLISHABLE_KEY=<your-stripe-LIVE-publishable-key>
STRIPE_WEBHOOK_SECRET=<your-stripe-webhook-secret>
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=<your-stripe-LIVE-publishable-key>

# Default free credits for new signups
DEFAULT_FREE_CREDITS=10

# ---------------------------------------------
# GOOGLE OAUTH
# ---------------------------------------------
GOOGLE_CLIENT_ID=<your-google-oauth-client-id>
GOOGLE_CLIENT_SECRET=<your-google-oauth-client-secret>
GOOGLE_REDIRECT_URI=https://api.test.cooly.ai/api/auth/google/callback
EXCHANGE_JWT_SECRET=<GENERATE-STRONG-SECRET-64-CHARS>

# ---------------------------------------------
# EMAIL (SMTP)
# ---------------------------------------------
SMTP_HOST=<your-smtp-host>
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=<your-smtp-user>
SMTP_PASS=<your-smtp-password>
EMAIL_FROM=<your-email-from-address>

# ---------------------------------------------
# SANITY CMS
# ---------------------------------------------
NEXT_PUBLIC_SANITY_PROJECT_ID=<your-sanity-project-id>
NEXT_PUBLIC_SANITY_DATASET=production
NEXT_PUBLIC_SANITY_API_VERSION=2025-01-01
SANITY_READ_TOKEN=<your-sanity-read-token>
REVALIDATE_SECRET=<your-webhook-secret>

# ---------------------------------------------
# POSTHOG ANALYTICS (Optional)
# ---------------------------------------------
# NEXT_PUBLIC_POSTHOG_KEY=<your-posthog-key>
# NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com
# POSTHOG_KEY=<your-posthog-key>
# POSTHOG_HOST=https://app.posthog.com
# POSTHOG_IP_SALT=<random-hash-for-ip-anonymization>

# ---------------------------------------------
# ADMIN CONFIGURATION
# ---------------------------------------------
ADMIN_SECRET_KEY=<GENERATE-STRONG-SECRET-64-CHARS>
ADMIN_EMAIL=<your-admin-email>
ADMIN_PASSWORD=<GENERATE-STRONG-PASSWORD>

# ---------------------------------------------
# MOCK MODE (Keep false for production)
# ---------------------------------------------
MOCK_API=false
MOCK_VIDEO=false
MOCK_SEEDREAM4=false
MOCK_SEEDREAM3=false
MOCK_SORA=false

# ---------------------------------------------
# FRONTEND PUBLIC VARIABLES
# ---------------------------------------------
NEXT_PUBLIC_API_BASE=https://api.test.cooly.ai
NEXT_PUBLIC_MOCK_API=false
NEXT_PUBLIC_DEBUG_LOGS=false
NEXT_PUBLIC_SORA2_HIDE_PRO=true
