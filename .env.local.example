# ==============================================
# Cooly AI - Local Development Environment
# ==============================================
# Copy this file to .env.local and fill in your API keys
#
# IMPORTANT: This file contains placeholders for sensitive credentials.
# Copy your real API keys from .env or obtain new ones from the providers.
#
# Usage:
#   cp .env.local.example .env.local
#   # Edit .env.local with your real API keys
#   docker-compose up -d --build
# ==============================================

# ---------------------------------------------
# LOCAL INFRASTRUCTURE (Pre-configured for Docker)
# These values work with docker-compose.yml
# ---------------------------------------------

# Database (Local PostgreSQL - NO SSL)
DATABASE_URL=postgresql://cooly:cooly_local_dev@postgres:5432/cooly_dev
DB_SSL=false

# Queue (BullMQ with local Redis - NOT SQS)
REDIS_URL=redis://redis:6379
USE_BULLMQ=true
# Leave SQS_MAIN_QUEUE_URL empty to force BullMQ mode
# SQS_MAIN_QUEUE_URL=

# Storage (Local MinIO - NOT Backblaze B2)
S3_ENDPOINT=http://minio:9000
S3_FORCE_PATH_STYLE=true
S3_BUCKET_NAME=cooly-local
S3_ACCESS_KEY_ID=cooly_minio
S3_SECRET_ACCESS_KEY=cooly_minio_secret
S3_REGION=us-east-1

# Also set B2 vars as fallback for existing code
B2_BUCKET_NAME=cooly-local
B2_REGION=us-east-1
B2_ACCESS_KEY_ID=cooly_minio
B2_SECRET_ACCESS_KEY=cooly_minio_secret

# ---------------------------------------------
# SERVER CONFIGURATION
# ---------------------------------------------
NODE_ENV=development
PORT=5000
LOG_LEVEL=debug

# JWT Secret (generate a random string for local dev)
JWT_SECRET=your-super-secret-jwt-key-for-local-development-only

# CORS and URLs
FRONTEND_URL=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
COOKIE_DOMAIN=localhost

# ---------------------------------------------
# WORKER CONFIGURATION
# ---------------------------------------------
START_GEN_WORKER=true
START_OUTBOX_RELAY=true
GEN_WORKER_CONCURRENCY=5
ENABLE_CAPTURE_WORKER=true
ENABLE_SESSION_SWEEPER=true
ENABLE_ENQUEUE_FIRST=true
ENABLE_OUTBOX=true
FORCE_OUTBOX_ONLY=true

# Database retry settings
PG_RETRY_ATTEMPTS=5
PG_RETRY_BASE_MS=250
PG_RETRY_JITTER_MS=250

# ---------------------------------------------
# BYTEPLUS (Seedream & Seedance)
# Get keys from: https://console.byteplus.com/
# ---------------------------------------------
BYTEPLUS_APP_ID=<your-byteplus-app-id>
BYTEPLUS_ACCESS_TOKEN=<your-byteplus-access-token>
BYTEPLUS_SECRET_KEY=<your-byteplus-secret-key>
BYTEPLUS_ARK_API_KEY=<your-byteplus-ark-api-key>

# Seedream 4.0 Image Generation
SEEDREAM4_API_KEY=<your-seedream4-api-key>
SEEDREAM4_MODEL_ID=seedream-4-0-250828
SEEDREAM4_API_BASE=https://ark.ap-southeast.bytepluses.com

# Seedance Video Generation
SEEDANCE_API_BASE=https://ark.ap-southeast.bytepluses.com
SEEDANCE_CREATE_PATHS=/api/v3/contents/generations/tasks
SEEDANCE_TASK_PATHS=/api/v3/contents/generations/tasks/{taskId}
SEEDANCE_API_KEY=<your-seedance-api-key>
SEEDANCE_ENDPOINT_ID=<your-seedance-endpoint-id>

# ---------------------------------------------
# OPENAI (Sora 2)
# Get keys from: https://platform.openai.com/
# ---------------------------------------------
OPENAI_API_KEY=<your-openai-api-key>
OPENAI_API_BASE=https://api.openai.com/v1

# Sora Provider: 'fal', 'openai', or 'wavespeed'
SORA_PROVIDER=wavespeed

# FAL.ai (Alternative Sora provider)
FAL_KEY=<your-fal-api-key>
FAL_SORA_MODEL=fal-ai/sora-2/text-to-video
FAL_SORA_MODEL_PRO=fal-ai/sora-2/text-to-video/pro

# WaveSpeed (Alternative Sora provider)
WAVESPEED_API_KEY=<your-wavespeed-api-key>

# ---------------------------------------------
# GOOGLE (Veo 3.1)
# Get credentials from: https://console.cloud.google.com/
# ---------------------------------------------
VIDEO_PROVIDER=google
GOOGLE_PROJECT_ID=<your-gcp-project-id>
GOOGLE_CLOUD_PROJECT=<your-gcp-project-id>
GOOGLE_LOCATION=us-central1
# Path to your service account JSON (mount in Docker if needed)
# GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/gcp-service-account.json

# kie.ai (Alternative Veo provider)
KIE_API_KEY=<your-kie-api-key>
KIE_API_BASE=https://api.kie.ai
KIE_ENABLE_FALLBACK=true

# ---------------------------------------------
# STRIPE (Billing)
# Get keys from: https://dashboard.stripe.com/
# ---------------------------------------------
# Use sandbox keys for local development
STRIPE_SECRET_KEY=<your-stripe-secret-key>
STRIPE_PUBLISHABLE_KEY=<your-stripe-publishable-key>
STRIPE_WEBHOOK_SECRET=<your-stripe-webhook-secret>
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=<your-stripe-publishable-key>

# Default free credits for new signups
DEFAULT_FREE_CREDITS=10

# ---------------------------------------------
# GOOGLE OAUTH
# Get credentials from: https://console.cloud.google.com/apis/credentials
# ---------------------------------------------
GOOGLE_CLIENT_ID=<your-google-oauth-client-id>
GOOGLE_CLIENT_SECRET=<your-google-oauth-client-secret>
APP_BASE_URL=http://localhost:5000
GOOGLE_REDIRECT_URI=http://localhost:5000/api/auth/google/callback
EXCHANGE_JWT_SECRET=<random-string-for-jwt-exchange>
FRONTEND_BASE_URL=http://localhost:3000

# ---------------------------------------------
# EMAIL (SMTP)
# ---------------------------------------------
SMTP_HOST=<your-smtp-host>
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=<your-smtp-user>
SMTP_PASS=<your-smtp-password>
EMAIL_FROM=<your-email-from-address>

# ---------------------------------------------
# SANITY CMS
# Get project info from: https://sanity.io/manage
# ---------------------------------------------
NEXT_PUBLIC_SANITY_PROJECT_ID=<your-sanity-project-id>
NEXT_PUBLIC_SANITY_DATASET=production
NEXT_PUBLIC_SANITY_API_VERSION=2025-01-01
SANITY_READ_TOKEN=<your-sanity-read-token>
REVALIDATE_SECRET=<your-webhook-secret>

# ---------------------------------------------
# POSTHOG ANALYTICS (Optional)
# Get keys from: https://posthog.com/
# ---------------------------------------------
# NEXT_PUBLIC_POSTHOG_KEY=<your-posthog-key>
# NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com
# POSTHOG_KEY=<your-posthog-key>
# POSTHOG_HOST=https://app.posthog.com
# POSTHOG_IP_SALT=<random-hash-for-ip-anonymization>

# ---------------------------------------------
# ADMIN CONFIGURATION
# ---------------------------------------------
ADMIN_SECRET_KEY=<your-admin-secret-key>
ADMIN_EMAIL=admin@localhost.dev
ADMIN_PASSWORD=<your-admin-password>

# ---------------------------------------------
# MOCK MODE (Set true to use mock data without real API calls)
# ---------------------------------------------
MOCK_API=false
MOCK_VIDEO=false
MOCK_SEEDREAM4=false
MOCK_SEEDREAM3=false
MOCK_SORA=false

# Mock timing (milliseconds)
SEEDREAM4_MOCK_MIN_MS=3000
SEEDREAM4_MOCK_MAX_MS=8000
SEEDANCE_MOCK_MIN_MS=3000
SEEDANCE_MOCK_MAX_MS=8000
SORA_MOCK_MIN_MS=3000
SORA_MOCK_MAX_MS=8000
VEO31_MOCK_MIN_MS=3000
VEO31_MOCK_MAX_MS=7000

# ---------------------------------------------
# FRONTEND PUBLIC VARIABLES
# These are exposed to the browser
# ---------------------------------------------
NEXT_PUBLIC_API_BASE=http://localhost:5000
NEXT_PUBLIC_MOCK_API=false
NEXT_PUBLIC_DEBUG_LOGS=true
NEXT_PUBLIC_SORA2_HIDE_PRO=true
